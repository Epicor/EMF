/*
 * emf (Epicor Mobile Framework) 
 * version:1.0.10-dev.332 built: 19-12-2016
*/
if("undefined"==typeof __ep_build_info)var __ep_build_info={};__ep_build_info.data={libName:"data",version:"1.0.10-dev.332",built:"2016-12-19"},function(){"use strict";angular.module("ep.token",["ep.sysconfig","ep.utils"])}(),function(){"use strict";angular.module("ep.data.model",["ep.utils"])}(),function(){"use strict";angular.module("ep.odata",[])}(),function(){"use strict";angular.module("ep.search",["ep.token","ep.templates"])}(),function(){"use strict";angular.module("ep.table",["ep.templates"])}(),function(){angular.module("ep.token").service("epErpRestService",["$resource","epTokenService",function(a,b){function c(c,e,f){var g=b.getToken();if(g){var h=d+(e?e:"");return a(h,f,{get:{method:"GET",headers:{Authorization:"Bearer "+g.token.AccessToken,"Content-Type":"application/json"}}})}}var d="";return{setUrl:function(a){d=a},get:function(a,b){return c("GET",a,b).get()},post:function(){}}}])}(),function(){"use strict";function a(a,b,c,d,e){b.settings={username:"",password:"",serverName:"",serverUrl:"",tokenUrl:"",token:{}},c.copyProperties(b.options,b.settings),b.loginUser=function(){if(b.options.fnOnLogin){var c=b.options.fnOnLogin(b.settings);return void(c&&c.hasError&&(b.hasError=!0,b.status=c.status))}if(d.showProgress({title:"Logging in",message:""}),""===b.settings.username||""===b.settings.password)return b.hasError=!0,b.status=""===b.settings.username?"Oops.. There's no user name there!":"Oops.. You forgot to type your password!",void d.hide();if(""===b.settings.serverName)return b.hasError=!0,b.status="Oops... Don't forget to type the Server.",void d.hide();var f=e.resolveServerUrl(b.settings.serverName);b.settings.serverUrl=f.serverUrl,b.settings.tokenUrl=f.tokenUrl;var g={username:b.settings.username,password:b.settings.password,serverUrl:b.settings.serverUrl,serverName:f.serverName},h={restUri:b.settings.tokenUrl};"demo"===b.settings.username.toLowerCase()&&"demo"===b.settings.password.toLowerCase()&&"demo"===b.settings.serverName.toLowerCase()&&(h.debug=!0,h.timeout="10000"),e.login(g,h).success(function(c){b.accessToken=c.AccessToken;try{if(b.settings.token=e.getToken(),!b.settings.token)return;b.options.username=b.settings.username,b.options.serverName=b.settings.serverName,b.options.fnOnGetToken?a.when(b.options.fnOnGetToken(b.settings)).then(function(a){return a&&angular.isString(a)?(b.hasError=!0,void(b.status=a)):void(b.options.fnOnSuccess&&b.options.fnOnSuccess(b.settings))},function(a){b.hasError=!0,b.status=a}):b.options.fnOnSuccess&&b.options.fnOnSuccess(b.settings)}catch(d){alert(d.message)}}).error(function(a,c,d,e){void 0!==e&&null!==e?e.url:"";b.hasError=!0,b.status=401==c?"Please review the user or password.":"We couldn't connect to the server. Please review it."}),d.hide()},b.passwordKeyPress=function(a){b.hasError=!1,b.status="";var c="undefined"==typeof event.which?event.keyCode:event.which;13===c&&b.loginUser()},b.clearWarning=function(){b.hasError=!1,b.status=""},b.showServer=function(){b.showServerName=!b.showServerName}}a.$inject=["$q","$scope","epUtilsService","epModalDialogService","epTokenService"],angular.module("ep.token").controller("epLoginViewCtrl",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"src/components/ep.token/ep-login-view/ep-login-view.html",controller:"epLoginViewCtrl",scope:{options:"="}}}angular.module("ep.token").directive("epLoginView",a)}(),function(){"use strict";function a(a,b){var c=b.getToken();a.user=c?c.user:{},a.status="",a.$watch(function(a){return a.hasToken=b.hasToken(),b.hasToken()}),a.login=function(){return a.hasError=!1,a.status="",a.user&&a.user.hasOwnProperty("username")&&a.user.hasOwnProperty("password")&&a.user.username&&a.user.password?void b.login(a.user).success(function(){a.hasToken=!0,a.onLoginSuccess&&a.onLoginSuccess(a.user)}).error(function(b,c,d,e){var f=void 0!==e&&null!==e?e.url:"";a.status="Login Failure at: "+f,a.hasError=!0,a.onLoginFail&&a.onLoginFail(a.status)}):(a.hasError=!0,void(a.status="Please fill required fields."))},a.logout=function(){b.logout(),a.user={},a.hasToken=!1},a.cancel=function(){a.onLoginCancel&&a.onLoginCancel()}}a.$inject=["$scope","epTokenService"],angular.module("ep.token").controller("epLoginCtrl",a)}(),function(){"use strict";function a(){return{restrict:"E",controller:"epLoginCtrl",templateUrl:"src/components/ep.token/ep-login/login.html",scope:{showTitle:"=",showLabels:"=",showCancel:"=",onLoginFail:"&",onLoginSuccess:"&",onLoginCancel:"&"}}}angular.module("ep.token").directive("epLogin",a)}(),function(){"use strict";angular.module("ep.token").provider("epTokenConfig",function(){var a={restUri:"https://localhost/ICE3/TokenResource.svc/",tokenId:"emf.token.auth",timeout:0,warnExpire:!0,warnExpireDuration:60,storePassword:!0,autoRenew:!1,debug:!1};this.$get=["epSysConfig",function(b){return b.mergeSection("ep.token",a),a}]})}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(a,b){return w.options={},e.copyProperties(d,w.options),e.copyProperties(b,w.options),t(a,w.options.restUri)}function i(){g.update(d.tokenId,void 0),w.tokenTimeoutPromise&&c.cancel(w.tokenTimeoutPromise)}function j(a,b,c){var d={title:"Login",closeButton:!0,templateOptions:{template:'<ep-login show-title="false" on-login-cancel="config.onLoginCancel()"></ep-login>'},onLoginCancel:function(){f.hide()}};e.copyProperties(c,d),f.showCustomDialog(d)}function k(){var a=g.get(d.tokenId);if(a&&a.expiresInSecs){var b=l(a);b||(i(),a=null)}return a}function l(a){var b=a||k(),c=0;if(b){var d=new Date;c=b.expiresUTC-d.getTime(),c=c<=0?0:Math.floor(c/1e3)}return c}function m(){var a=k();return void 0!==a&&!angular.equals({},a)}function n(){var a=k();w.options.fnRenewToken?w.options.fnRenewToken(a):a&&a.user&&t(a.user,a.uri)}function o(a,b){var c=e.ensureEndsWith(a,"/");c=c.substring(0,c.length-1);var d=c.toLowerCase().trim(),f="https://";0===d.indexOf("https://")?(f="https://",c=c.substring(f.length)):0===d.indexOf("http://")&&(f="http://",c=c.substring(f.length));var g="";return""!==b&&(g=b?"/"+b:"/TokenResource.svc"),{prefix:f,serverName:c,serverUrl:f+c,tokenUrl:f+c+g}}function p(b,c){var d={headers:{username:b.username,password:b.password,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}},f=e.ensureEndsWith(c,"/");return a.post(f,null,d)}function q(a,c){var d=b.defer(),e=d.promise;e.success=function(a){return e.then(a),e},e.error=function(a){return e.then(null,a),e};var f={TokenType:"Bearer",AccessToken:"mySampleTokenDataValue"};return r(f,a,c),d.resolve(f),e}function r(a,b,c){var e=a&&a.AccessToken&&"Bearer"===a.TokenType?a:void 0,f=e&&a.ExpiresIn?a.ExpiresIn:w.options.timeout;w.options.timeout&&w.options.timeout<f&&(f=w.options.timeout);var h=new Date,i=new Date(h);i.setTime(i.getTime()+1e3*f),g.update(d.tokenId,{uri:c,user:b,token:e,createdUTC:h.getTime(),expiresUTC:i.getTime(),expiresInSecs:f}),v(f)}function s(){w.tokenTimeoutPromise&&c.cancel(w.tokenTimeoutPromise);var a=l();a?v(a):i()}function t(a,b){i();var c=b||w.options.restUri;if(w.options.debug)return q(a,c);var d=w.options.fnUserFetchToken||p;return d(a,c).success(function(b){r(b,a,c)}).error(function(){})}function u(a){w.options.fnRenewToken?w.options.fnRenewToken(a):a&&a.user&&t(a.user,a.uri)}function v(a){if(w.tokenTimeoutPromise&&c.cancel(w.tokenTimeoutPromise),w.options.warnExpire||w.options.autoRenew){var b=a>w.options.warnExpireDuration?a-w.options.warnExpireDuration:a;b-=5,w.tokenTimeoutPromise=c(function(){var a=k();if(a){var b=l();if(w.options.warnExpire){var c={title:"Expiration Notice",message:"Your session is about to expire in {timer} seconds...",autoClose:b,icon:"fa fa-warning fa-4x",buttons:[{text:"Continue",action:function(){u(a)}},{text:"Log Out",action:function(){i()}}],fnDefaultAction:function(){i()}};e.copyProperties(w.options.warnExpireDialogOptions,c),f.showMessage(c)}else w.options.autoRenew&&u(a)}},1e3*b)}}var w={tokenTimeoutPromise:void 0,options:{}};return s(),{login:h,logout:i,getToken:k,hasToken:m,getExpiresIn:l,renewToken:n,showLoginDialog:j,resolveServerUrl:o}}a.$inject=["$http","$q","$timeout","epTokenConfig","epUtilsService","epModalDialogService","epLocalStorageService"],angular.module("ep.token").service("epTokenService",a)}(),function(){"use strict";angular.module("ep.data.model").factory("epDataModelService",["epUtilsService",function(a){function b(b){g[b]=a.merge({},h[b])}function c(a){delete g[a]}function d(b){a.merge(h[b],g[b]),delete g[b]}function e(a){return h[a]=h[a]||{},h[a]}function f(a){return Object.keys(h[a]).forEach(function(b){delete h[a][b]}),h[a]}var g={},h={};return{beginTransaction:b,commitTransaction:c,rollbackTransaction:d,getModel:e,clearModel:f}}])}(),function(){"use strict";angular.module("ep.odata").factory("odataQueryFactory",function(){function a(a,b){var c="";if("string"==typeof a&&(c=a,a=null),a&&a.constructor.toString().indexOf("Array")>1){var d;for(d=0;d<a.length;d++)c+=(""===c?"":",")+a[d];a=null}if(a)for(var e in a)a.hasOwnProperty(e)&&(c+=(""===c?"":",")+e,b&&a[e]&&(c+=" desc"));return c}function b(a){return"string"==typeof a&&(l.type=a),this}function c(a){return isNaN(a)||parseInt(Number(a))!==a||(l.$top=a),this}function d(a){return isNaN(a)||parseInt(Number(a))!==a||(l.$skip=a),this}function e(b){var c=a(b,!0);return""!==c&&(l.$orderby=c),this}function f(b){var c=a(b);return""!==c&&(l.$select=c),this}function g(b){var c=a(b);return""!==c&&(l.$expand=c),this}function h(a){if(a)for(var b in a)a.hasOwnProperty(b)&&a[b]&&(l.$filter=(l&&l.$filter?l.$filter+" and ":"")+b+" eq '"+a[b]+"'");return this}function i(a,b,c,d){var e={">":"gt",">=":"ge","<":"lt","<=":"le","=":"eq","==":"eq","!=":"ne","<>":"ne"};b=e[b]||b;var f="",g=d&&"or"in d&&d.or?" or ":" and ",h=angular.isString(c)||isNaN(c)?"'":"";if(null!==a&&void 0!==a&&null!==c&&void 0!==c){switch(b){case"math":if(!(d&&"mathOperand"in d&&"mathFunction"in d&&"mathCompareOp"in d))throw"Malformed math operation; params object must contain mathOperand, mathFunction, and mathCompareOp properties";if(isNaN(c)||isNaN(d.mathOperand))throw"The second argument and mathOperand for math functions needs to be a number";b=e[d.mathCompareOp]||d.mathCompareOp,a=a+" "+d.mathFunction+" "+d.mathOperand;break;case"endswith":case"startswith":a=b+"("+a+",'"+c+"')",b="eq",c="true",h="",f=d&&"not"in d&&d.not?"not ":"";break;case"contains":a="indexof("+a+",'"+c+"')",b=d&&"not"in d&&d.not?"lt ":"gt",c="0",h="";break;case"day":case"month":case"year":case"second":case"minute":case"hour":if(isNaN(c)&&parseInt(Number(c))!==c)throw"The second argument for date/time functions needs to be an integer";a=b+"("+a+")",b="eq"}l.$filter=(l&&l.$filter?l.$filter+g:"")+f+a+" "+b+" "+h+c+h}return this}function j(a,b){var c=b?" or ":" and ";return l.$filter=(l&&l.$filter?l.$filter+c:"")+a,this}function k(){var a=$.extend({},l);return l={},a}var l={};return{setType:b,setTop:c,setSkip:d,setOrderBy:e,setSelect:f,setExpands:g,setFilter:h,setWhere:i,setWhereCustom:j,compose:k}})}(),function(){"use strict";angular.module("ep.search").provider("searchConfig",function(){var a={searchUri:"https://localhost/EES/EpicorERP/search.xml"};this.$get=["epSysConfig",function(b){return b.mergeSection("ep.search",a),a}]})}(),function(){"use strict";function a(a,b){a.enterpriseSearch={},a.enterpriseSearch.searching=!1,a.enterpriseSearch.searchResults=null,a.enterpriseSearch.status="",a.enterpriseSearch.changeSearch=function(){var b=a.enterpriseSearch.searchText;""===b&&(a.enterpriseSearch.searchResults=null,a.enterpriseSearch.status="")},a.enterpriseSearch.runSearch=function(c){""!==c&&(a.enterpriseSearch.searching=!0,a.enterpriseSearch.searchResults=[],a.enterpriseSearch.status="",a.enterpriseSearch.hasError=!1,b.search(c,0,100).then(function(b){a.enterpriseSearch.searching=!1,a.enterpriseSearch.searchResults=b},function(b){a.enterpriseSearch.status="An error occurred: "+b.status,a.enterpriseSearch.searching=!1,a.enterpriseSearch.hasError=!0}))}}angular.module("ep.search").controller("epSearchCtrl",["$scope","searchService",a])}(),function(){"use strict";angular.module("ep.search").directive("epSearch",function(){return{restrict:"E",replace:!0,controller:"epSearchCtrl",templateUrl:"src/components/ep.search/search.html"}})}(),function(){"use strict";angular.module("ep.search").factory("searchService",["$http","searchConfig",function(a,b){function c(a,b,c){return d(a,b,c).then(function(a){return e(a)},function(){})}function d(c,d,e){var f=b.searchUri+"?locale="+(navigator.language?navigator.language:navigator.userLanguage)+"&preservenulls="+!1+"&likeLinkFormat=EWAUrl&callback=JSON_CALLBACK",g=(new Date).valueOf(),h="&q="+c+"&start="+d+"&cache="+g.toString()+"&pageSize="+e;return a.get(f+h)}function e(a){var b={};if(a&&a.hasOwnProperty("data")){var c=a.data,d=$.parseXML(c),e=$(d);e.find("[primaryTable]").each(function(){var a=[];$(this).find("[companyName]").each(function(){var b={location:this.getAttribute("location")||"",label:this.getAttribute("label")||"",companyContext:this.getAttribute("companyName"),keyTag:this.getAttribute("keyTag"),fields:[]};$("*",this).each(function(a,c){for(var d={},e=0,f=c.attributes.length;e<f;e++)d[c.attributes[e].nodeName]=c.attributes[e].nodeValue;d.FieldName=c.nodeName,d.FieldValue=c.textContent,b.fields.push(d)}),a.push(b)}),b[this.nodeName]={label:this.getAttribute("label"),primaryTable:this.getAttribute("primaryTable"),results:a}})}return b}return{search:c}}])}(),function(){"use strict";angular.module("ep.table").controller("epTableCtrl",["$scope",function(a){a.isLoading=!0,a.headers=a.columnHeaders?a.columnHeaders.split(",").map(function(a){return a.trim()}):[],a.colCount=a.headers.length,a.props=a.columnHeaders?a.columnProperties.split(",").map(function(a){return a.trim()}):[],a.isLoading=!1,a.selectRow=function(b,c){a.trackSelectedRow&&(a.data.selectedRow=b,a.data.forEach(function(a){a.$isSelected=!1}),b.$isSelected=!0,a.onSelectRow&&a.onSelectRow({row:b,$event:c}))},a.trackSelectedRow&&a.data&&a.data.length&&a.selectRow(a.data[0]),a.$watch("data",function(){a.trackSelectedRow&&a.data&&a.data.length&&!a.data.selectedRow&&a.selectRow(a.data[0])}),a.onDblClick=function(b,c){a.data&&a.data.length&&a.onDoubleClickRow&&a.onDoubleClickRow({row:b,$event:c})}}])}(),function(){"use strict";angular.module("ep.table").directive("epTable",function(){return{restrict:"E",replace:!0,scope:{data:"=",columnHeaders:"@",columnProperties:"@",trackSelectedRow:"=",striped:"=",onSelectRow:"&",onDoubleClickRow:"&"},controller:"epTableCtrl",templateUrl:"src/components/ep.table/table.html"}})}(),angular.module("ep.templates").run(["$templateCache",function(a){"use strict";a.put("src/components/ep.token/ep-login-view/ep-login-view.html",'<!--This is a partial for the ep-login-view directive --><div class="ep-login-view container-fluid"><div class=ep-login-background><div class=ep-background-image ng-if=!settings.customImage></div><img class=ep-background-custom-image ng-if=settings.customImage ng-src={{settings.customImage}} alt=""></div><div class=ep-login-up-box><div class="ep-login-box center-block"><form class=form-group><div class=form-group><p class=ep-login-text><b>Please enter your credentials to sign in.</b></p><div class=input-group><span class=input-group-addon><i class="fa fa-user fa-fw"></i></span> <input clearable name=username ng-keypress=clearWarning() id=username class=form-control ng-model=settings.username placeholder="User Name"></div><br><div class=input-group><span class=input-group-addon><i class="fa fa-lock fa-fw"></i></span> <input type=password clearable ng-keypress=passwordKeyPress($event) name=password id=password class=form-control ng-model=settings.password placeholder="Password"></div><br><div ng-show=showServerName class=input-group><span class=input-group-addon><i class="fa fa-server fa-fw"></i></span> <input spellcheck autocorrect=false clearable name=servername id=serverValue class=form-control ng-model=settings.serverName placeholder="Server"></div><br><div ng-if=status class="text-center alert alert-warning"><label>{{status}}</label><br></div><div><button ng-if="options.showSettingsButton !== false" class="btn btn-default pull-left" ng-click=showServer()><i class="fa fa-cog fa-fw"></i></button> <button type=submit class="btn btn-primary pull-right" ng-click=loginUser()>Log in</button></div></div></form></div></div></div>'),a.put("src/components/ep.token/ep-login/login.html",'<div class=thumbnail><div ng-if="showTitle !== false" class=caption><h3 ng-hide=hasToken><span class="icon icon-enter"></span> Login</h3><h3 ng-show=hasToken><span class="icon icon-exit"></span> Logout</h3><hr></div><form role=form><div ng-if="showLabels === false" class=input-group><span class=input-group-addon><i class="fa fa-user fa-fw"></i></span> <input tabindex=1 id=user-name name=username required class=form-control ng-model=user.username placeholder="user name"></div><div ng-if="showLabels !== false" class=form-group><label for=user-name class="col-sm-2 control-label">User:</label><div><input tabindex=1 id=user-name name=username required class=form-control ng-model=user.username placeholder="user name"></div></div><div ng-if="showLabels === false" class=form-group><div class=input-group><span class=input-group-addon><i class="fa fa-key fa-fw"></i></span> <input tabindex=2 id=user-password name=password required class=form-control type=password placeholder=password ng-model="user.password"></div></div><div ng-if="showLabels !== false" class=form-group><label for=user-password class="col-sm-2 control-label">Password:</label><div><input tabindex=2 id=user-password name=password required class=form-control type=password placeholder=password ng-model="user.password"></div></div></form><div class="alert alert-danger" id=validationSummary role=alert ng-show=hasError>{{status}}</div><div><button ng-if="showCancel !== false" type=button class="btn btn-default" ng-click=cancel()>Cancel</button> <button type=button class="btn btn-primary" ng-hide=hasToken ng-click=login()>Login</button> <button type=button class="btn btn-primary" ng-show=hasToken ng-click=logout()>Logout</button></div></div>'),a.put("src/components/ep.search/search.html",'<div><header class=reverse><div class=searchControl><form role=form ng-submit=runSearch(searchText)><input type=search placeholder="Enter your search terms..." ng-model=searchText ng-change="changeSearch()"> <span class=input-group-btn><button class="btn btn-default" type=button><span class="icon icon-search"></span></button></span> <button ng-click=runSearch(searchText) ng-disabled=!searchText>search</button></form><div class="alert alert-danger" id=validationSummary role=alert ng-show=hasError>{{status}}</div></div></header><section><div ng-show=enterpriseSearch.searchText><p ng-show=enterpriseSearch.searching>Searching for the following terms: \'{{enterpriseSearch.searchText}}\' ...</p><p ng-show=enterpriseSearch.searchError>{{enterpriseSearch.searchError}}</p></div><ul ng-if=enterpriseSearch.searchResults class=searchResults><li ng-repeat="searchResult in enterpriseSearch.searchResults track by $index" class=searchResultCategory><b>Category: {{searchResult.label | uppercase}}</b><br><ul ng-if=searchResult.results><li ng-repeat="result in searchResult.results" class=searchResult><span class=searchResultHeader ng-class=searchResult.label>{{result.label | uppercase}} - {{result.companyContext}} - {{result.keyTag}}</span><br><div ng-if=result.fields><span ng-repeat="field in result.fields" class=searchResultField>{{field.alias}}: {{field.FieldValue}},</span></div></li></ul></li></ul></section></div>'),a.put("src/components/ep.table/table.html",'<table class=table ng-class="{\'table-striped\' : striped}"><tr><th ng-repeat="oneTh in headers track by $index">{{oneTh}}</th></tr><tr ng-show=isLoading><td colspan={{colCount}}><div class="progress progress-striped active"><div class=progress-bar role=progressbar aria-valuenow=1 aria-valuemin=0 aria-valuemax=1 style="width: 100%"></div></div></td></tr><tr ng-show=loadError><td colspan={{colCount}}><p class="text-danger text-center"><i class="fa fa-exclamation-triangle"></i> {{loadError}}</p></td></tr><tr ng-repeat="row in data" class=ep-table-row ng-class="{ \'info\': row.$isSelected }" ng-click=selectRow(row,$event) ng-dblclick=onDblClick(row,$event)><td ng-repeat="cell in props track by $index" class=ep-table-cell>{{row[cell]}}</td></tr></table>')}]);