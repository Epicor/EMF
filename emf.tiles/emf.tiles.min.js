/*
 * emf (Epicor Mobile Framework) 
 * version:1.1.0-dev.76 built: 23-08-2018
*/
if("undefined"==typeof __ep_build_info)var __ep_build_info={};__ep_build_info.tiles={libName:"tiles",version:"1.1.0-dev.76",built:"2018-08-23"},angular.module("ep.card",["ep.templates","ep.sysconfig"]),function(){"use strict";angular.module("ep.color.tile",[])}(),function(){"use strict";angular.module("ep.tile",["ep.templates","ep.sysconfig","ep.application","ep.utils","ep.include"])}(),function(){"use strict";angular.module("ep.tiles.panel",["ep.templates","ep.sysconfig","ep.tile"])}();var app=angular.module("ep.card");app.directive("epCard",function(){return{restrict:"E",transclude:!0,replace:!0,templateUrl:"src/components/ep.card/ep-card-template.html"}}),app.directive("epCardBlock",function(){return{restrict:"E",transclude:!0,replace:!0,templateUrl:"src/components/ep.card/ep-card-block-template.html",link:function(a,b,c){"true"===c.contrast&&(b[0].className=b[0].className+" card-block-contrast")}}}),app.directive("epCardTitle",function(){return{restrict:"E",transclude:!0,replace:!0,templateUrl:"src/components/ep.card/ep-card-title-template.html"}}),function(){"use strict";angular.module("ep.color.tile").directive("epColorTile",function(){return{restrict:"E",scope:{title:"@",description:"@",fineprint:"@",icon:"@",color:"@",colorclass:"@"},templateUrl:"src/components/ep.color.tile/ep-color-tile.html"}})}(),function(){"use strict";angular.module("ep.tile").provider("epTileConfig",function(){var a={bingTile:{bingImageArchiveUrl:"http://www.bing.com/HPImageArchive.aspx?format=rss&idx=0&mkt=en-US",bingProxyUrl:"//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=50&callback=JSON_CALLBACK&q=",bingNumberOfImages:5,liveSettings:{dataDelay:7e3,dataDirection:"horizontal",dataMode:"carousel"}},imageTile:{liveSettings:{dataDelay:5e3,dataDirection:"vertical",dataMode:"carousel"}}};this.$get=["epSysConfig",function(b){return b.mergeSection("ep.tile",a),a}]})}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(a){var b=d.defer(),g=h.getAssetsPath("shell","ep.tile/bing"),i=function(a){e.error("Error parsing retrieving bing images: "+a);for(var c={images:[]},d=1;d<6;d++)c.images.push({src:g+d+".jpg",title:"Bing Image of the day (offline)"});b.resolve(c)};try{var j=f.bingTile.bingImageArchiveUrl+"&n="+a;c.jsonp(f.bingTile.bingProxyUrl+encodeURIComponent(j)).success(function(a){if(a&&a.responseData&&a.responseData.feed&&a.responseData.feed.entries&&a.responseData.feed.entries.length){var c={images:[]};angular.forEach(a.responseData.feed.entries,function(a){c.images.push({src:"http://www.bing.com"+a.link,title:a.title})}),b.resolve(c)}else{var d="unknown response failure";a&&a.responseStatus&&(d="status - "+a.responseStatus),a&&a.responseDetails&&(d+=" "+a.responseDetails),i(d)}}).error(function(a,b){i("$http status - "+b)})}catch(k){i(k.message)}return b.promise}function j(a,b){var c="",d=["half","one","two","three","four","five","six","seven","eight","nine","ten"];if(angular.isNumber(a)){var e=-1;a>=0&&a<1?e=0:a>=1&&a<=10&&(e=Math.round(a)),e!==-1&&(c=" "+d[e]+b)}return c}function k(b){if(b){var c=0;angular.forEach(b,function(b){a.state.images.push({src:b.src,title:b.title||a.tile.footer,index:c,data:b}),c++})}}a.initializeTile=function(){var c=!1,d=a.tile;if(!d)return void e.error("tile object must be defined for ep.tile directive");var h=void 0!==d.width?d.width:a.width,l=void 0!==d.height?d.height:a.height;a.state.tileClass="",a.state.images=[],"custom"===d.type?a.state.templateOptions=d.templateOptions:"image"===d.type||"bing"===d.type?(c=!0,void 0===h&&(h="image"===d.type?2:3),void 0===l&&(l=2),a.state.templateUrl="src/components/ep.tile/ep-tile-templates/ep-tile-image.html",a.state.liveSettings="bing"===d.type?f.bingTile.liveSettings:f.imageTile.liveSettings,d.liveSettings&&g.copyProperties(d.liveSettings,a.state.liveSettings),"bing"===d.type?i(f.bingTile.bingNumberOfImages).then(function(a){k(a.images)}):(d.liveSettings&&g.copyProperties(),k(d.images))):(void 0===h&&(h=2),a.state.templateUrl="src/components/ep.tile/ep-tile-templates/ep-tile-menu.html"),c&&d.isLive!==!1&&(a.state.optionsClass+="ep-live-tile"),d.tileClass&&(a.state.tileClass+=" "+d.tileClass),a.state.tileClass+=j(h,"-wide"),a.state.tileClass+=j(l,"-tall");var m;d.caption&&(m=d.caption.length,m>30?a.state.optionsClass+=" ep-tile-opt-cap-30":m>15&&(a.state.optionsClass+=" ep-tile-opt-cap-15")),d.description&&(m=d.description.length,m>40?a.state.optionsClass+=" ep-tile-opt-desc-40":m>20&&(a.state.optionsClass+=" ep-tile-opt-desc-20")),d.icon&&(a.state.optionsClass+=" ep-tile-opt-icon"),d.closeButton!==!1&&(a.state.optionsClass+=" ep-tile-opt-close-btn"),a.state.color=d.color||a.color||"",a.state.closeAction=function(a,b){b.stopPropagation(),a.closeAction&&a.closeAction(a,b)},a.state.action=function(b,c){if(b.action){var d,e;if("image"===b.type){var f=angular.element(a.state.tileElement).find(".ha .active img");if(f&&f.length){var g=angular.element(f).attr("image-index");""!==g&&(d=parseInt(g),e=a.state.images[d].data)}}b.action(b,c,d,e)}},b(function(){angular.element(a.state.tileElement).find(".ep-live-tile .live-tile").liveTile()},1e3)},a.$watch("sizeMode",function(b){a.state.sizeMode="container"===b?"ep-tile-size-container":"ep-tile-size-responsive"}),a.$watch("color",function(b,c){b&&b!==c&&(a.tile&&a.tile.color||(a.state.color=b||""))}),a.$watch("tile",function(b,c){b&&b!==c&&a.initializeTile()})}a.$inject=["$scope","$timeout","$http","$q","$log","epTileConfig","epUtilsService","epApplicationConfig"],angular.module("ep.tile").controller("epTileCtrl",a)}(),function(){"use strict";function a(a){return{restrict:"E",controller:"epTileCtrl",templateUrl:"src/components/ep.tile/ep-tile.html",scope:{tile:"=",color:"=",sizeMode:"=",width:"=",height:"=",liveSettings:"="},link:function(b,c){b.state={optionsClass:"",tileElement:c,templateUrl:"",images:[],closeAction:void 0,sizeMode:"ep-tile-size-responsive",color:"",liveSettings:{dataMode:"carousel",dataDirection:"horizontal",dataDelay:"7000"},templateOptions:{}},a(function(){b.initializeTile()})}}}a.$inject=["$timeout"],angular.module("ep.tile").directive("epTile",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(a,c){if(b.menuId===c.menuId){b.state.list||(b.state.list=[]);var d=c.factory,e=d.data.favorites;angular.forEach(e,function(a){var c=_.find(b.state.list,function(b){return a===b.menuItem});c||b.state.list.push(b.createItem(d,a))})}}function h(a,c){if(b.menuId===c.menuId){b.state.list||(b.state.list=[]);var d=c.factory,e=d.data.favorites,f=[];angular.forEach(b.state.list,function(a){var b=_.find(e,function(b){return b===a.menuItem});b||f.push(a)}),angular.forEach(f,function(a){var c=_.findIndex(b.state.list,function(b){return b===a});c!==-1&&b.state.list.splice(c,1)})}}b.getFooter=function(a,b){var c="Last Accessed: ",d=a.getItemLastAccess(b);return c+=d?moment(d).calendar():"never"},b.createItem=function(a,c){b.fnCloseAction=function(b){var c=a.findMenuItemById(b.id);c&&a.toggleFavorite(c)};var d=b.getFooter(a,c),e={id:c.id,closeAction:b.fnCloseAction,icon:b.menuIcon||c.icon||"fa fa-dashboard",caption:c.caption,description:c.description,type:"menu",footer:d,menuItem:c,sort:c.caption,color:c.color};return c.tile&&f.copyProperties(c.tile,e),e.action=function(){a.triggerAction(c)},e},b.onMenuChange=function(a,c){if(b.menuId===c.menuId){var d=c.factory,e=[];angular.forEach(d.data.favorites,function(a){e.push(b.createItem(d,a))}),b.state.list=e}},b.onFavoritesChange=function(a,c){b.menuId===c.menuId&&(b.state.list||(b.state.list=[]),h(a,c),g(a,c))},b.onMenuItemClicked=function(a,c){if(b.menuId===c.menuId&&b.state.list&&c.menuItem){var d=c.factory,e=_.find(b.state.list,function(a){return a.id===c.menuItem.id});e&&(e.footer=b.getFooter(d,c.menuItem))}},a.$on(d.MLM_INITIALIZED_EVENT,b.onMenuChange),a.$on(d.MLM_MENU_DATA_CHANGED,b.onMenuChange),a.$on(d.MLM_FAVORITES_ADDED,g),a.$on(d.MLM_FAVORITES_DELETED,h),a.$on(d.MLM_ITEM_CLICKED,b.onMenuItemClicked),b.$watch("menuId",function(a,c){a&&a!==c&&(b.menuFactory=e.getMenuFactory(a),b.menuFactory&&b.$watch(b.menuFactory.data,function(){var a={eventId:d.MLM_MENU_DATA_CHANGED,menuId:b.menuId,factory:b.menuFactory};b.onMenuChange(d.MLM_MENU_DATA_CHANGED,a)}))}),b.prepareBeforeList=function(){var a=[];b.bing&&a.push({id:"bing-image-of-the-day",sort:"__abing",type:"bing",width:b.bingWidth||3,height:b.bingHeight||2}),b.beforeList&&angular.forEach(b.beforeList,function(b){a.push(b)}),b.state.beforeList=a},b.$watch("bing",function(a,c){a!==!0&&a!==!1||a===c||b.prepareBeforeList()}),b.$watch("beforeList",function(a,c){a&&c!==a&&b.prepareBeforeList()}),b.$watch("afterList",function(a){if(a){var c=[];angular.forEach(a,function(a){c.push(a)}),b.state.afterList=c}})}a.$inject=["$rootScope","$scope","$timeout","epMultiLevelMenuConstants","epMultiLevelMenuService","epUtilsService"],angular.module("ep.tiles.panel").controller("epTilesMenuFavoritesCtrl",a)}(),function(){"use strict";function a(){return{restrict:"E",controller:"epTilesMenuFavoritesCtrl",template:"<ep-tiles-panel list=state.list before-list=state.beforeList after-list=state.afterList color=color size-mode=sizeMode width=width height=height disable-sort=disableSort></ep-tiles-panel>",scope:{menuId:"=",beforeList:"=",afterList:"=",sizeMode:"=",color:"=",bing:"=",menuIcon:"=",width:"=",height:"=",bingHeight:"=",bingWidth:"=",disableSort:"="},link:function(a,b){a.state={theElement:b,list:[],beforeList:[],afterList:[]},a.prepareBeforeList()}}}angular.module("ep.tiles.panel").directive("epTilesMenuFavorites",a)}(),function(){"use strict";function a(a){function b(a){return a.sort||a.caption}var c=["amber","blue","brown","cobalt","crimson","cyan","magenta","lime","indigo","green","emerald","mango","mauve","olive","orange","pink","red","sienna","steel","teal","violet","yellow"];a.sortList=a.disableSort!==!0?b:void 0,a.initColors=function(){if(a.state.tileColor="","function"==typeof a.color)a.state.tileColor="",a.state.colorFunc=function(b){return a.color(b)};else if("mix"===a.color||"random"===a.color){a.state.tileColor="";var b=_.shuffle(c);a.state.colorIndex=-1,a.state.colorFunc=function(d){return d.color||("random"===a.color?d.color=b[a.state.colorIndex++%c.length]:d.color=c[a.state.colorIndex++%c.length]),""}}else a.color&&angular.isString(a.color)&&(a.state.tileColor=a.color)},a.$watch("color",function(b,c){b&&b!==c&&a.initColors()}),a.$watch("list",function(b,c){b&&b!==c&&a.initColors()}),a.$watch("beforeList",function(b,c){b&&b!==c&&a.initColors()}),a.$watch("afterList",function(b,c){b&&b!==c&&a.initColors()}),a.$watch("disableSort",function(c,d){c!==!0&&c!==!1||c===d||(a.sortList=a.disableSort!==!0?b:void 0)})}a.$inject=["$scope"],angular.module("ep.tiles.panel").controller("epTilesPanelCtrl",a)}(),function(){"use strict";function a(){return{restrict:"E",controller:"epTilesPanelCtrl",templateUrl:"src/components/ep.tiles.panel/ep-tiles-panel.html",scope:{list:"=",beforeList:"=",afterList:"=",color:"=",sizeMode:"=",width:"=",height:"=",disableSort:"="},link:function(a,b){a.state={tilePanelElement:b,list:[],beforeList:[],afterList:[],tileColor:"",colorFunc:void 0},a.initColors()}}}angular.module("ep.tiles.panel").directive("epTilesPanel",a)}(),angular.module("ep.templates").run(["$templateCache",function(a){"use strict";a.put("src/components/ep.card/ep-card-block-template.html","<div class=card-block ng-transclude></div>"),a.put("src/components/ep.card/ep-card-template.html",'<div><section class=ep-card><div class="card card-inverse card-primary text-center" ng-transclude></div></section></div>'),a.put("src/components/ep.card/ep-card-title-template.html","<div class=card-title ng-transclude></div>"),a.put("src/components/ep.card/ep-card.html","<!--This is a partial for the ep-card directive --><div class=ep-card></div>"),a.put("src/components/ep.color.tile/ep-color-tile.html",'<!-- Color Tile Component --><div class="ep-color-tile ep-align-container {{colorclass}}" ng-style="{\'background-color\': color}"><h3>{{title}}</h3><h5>{{description}}</h5><small>{{fineprint}}</small><div class="ep-color-tile-icon ep-align-content ep-align-vcenter"><i class="fa {{icon}}"></i></div></div>'),a.put("src/components/ep.tile/ep-tile-templates/ep-tile-image.html",'<!--This is a partial for the ep-tile-image --><div data-mode={{state.liveSettings.dataMode}} data-direction={{state.liveSettings.dataDirection}} data-delay={{state.liveSettings.dataDelay}} class="accent live-tile" ng-class=state.tileClass><div ng-repeat="img in state.images"><img class=full ng-src={{img.src}} alt="" image-index="{{img.index}}"> <span ng-if="tile.hideFooter !== false" class="tile-title accent" style="padding: 4px; background-color: gray">{{img.title}}</span></div></div>'),a.put("src/components/ep.tile/ep-tile-templates/ep-tile-menu.html",'<!--This is a partial for the ep-tile-menu --><div class="live-tile accent" ng-class=state.tileClass><div class="well ep-tile-container"><span ng-if="tile.closeButton !== false" class=ep-tile-close-button><i class="fa fa-times" ng-click="state.closeAction(tile, $event)"></i></span><h5 ng-if="tile.caption !== undefined" class="ep-tile-caption-panel btn-primary clearfix"><span ng-if=tile.icon class="ep-tile-icon fa-lg {{tile.icon}}"></span> <span class="ep-tile-caption tile-caption">{{tile.caption}}</span></h5><p class="ep-tile-description text-primary">{{tile.description}}</p><div ng-if=tile.contentIcon class="ep-content-icon ep-align-content ep-align-vcenter"><i class="fa {{tile.contentIcon}} fa-3x"></i></div></div><span ng-if="tile.footer !== undefined" class="tile-title accent">{{tile.footer}}</span></div>'),a.put("src/components/ep.tile/ep-tile.html",'<!--This is a partial for the ep-tile directive --><div class="ep-tile {{state.sizeMode}} {{state.color}}" ng-class=state.optionsClass><div ng-if="tile.type !== \'custom\'" ng-click="state.action(tile, $event)" class=ep-tile-container ng-include=state.templateUrl></div><div ng-if="tile.type === \'custom\'" class="live-tile accent {{state.color}}" ng-class=state.tileClass><span ng-if="tile.closeButton !== false" class=ep-tile-close-button><i class="fa fa-times" ng-click="state.closeAction(tile, $event)"></i></span><div ng-click="state.action(tile, $event)" class=ep-tile-container><ep-include options=tile.templateOptions user-data=tile></ep-include></div></div></div>'),a.put("src/components/ep.tiles.panel/ep-tiles-panel.html",'<!--This is a partial for the ep-tiles-panel directive --><div class="ep-tiles-panel tiles tile-group {{state.tileColor}}" style="margin: 0px"><ep-tile ng-if="beforeList && beforeList.length" class="ep-tiles-before-list ep-repeat-animation" ng-class=state.colorFunc(item) tile=item ng-repeat="item in beforeList | orderBy:sortList" size-mode=sizeMode width=width height=height></ep-tile><ep-tile class="ep-tiles-list ep-repeat-animation" ng-class=state.colorFunc(item) tile=item ng-repeat="item in list | orderBy:sortList" size-mode=sizeMode width=width height=height></ep-tile><ep-tile ng-if="afterList && afterList.length" class="ep-tiles-after-list ep-repeat-animation" ng-class=state.colorFunc(item) tile=item ng-repeat="item in afterList | orderBy:sortList" size-mode=sizeMode width=width height=height></ep-tile></div>')}]);