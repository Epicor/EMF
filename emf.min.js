"use strict";function searchController(a,b){a.enterpriseSearch={},a.enterpriseSearch.searching=!1,a.enterpriseSearch.searchResults=null,a.enterpriseSearch.status="",a.enterpriseSearch.changeSearch=function(){var b=a.enterpriseSearch.searchText;""===b&&(a.enterpriseSearch.searchResults=null,a.enterpriseSearch.status="")},a.enterpriseSearch.runSearch=function(c){""!==c&&(a.enterpriseSearch.searching=!0,a.enterpriseSearch.searchResults=[],a.enterpriseSearch.status="",a.enterpriseSearch.hasError=!1,b.search(c,0,100).then(function(b){a.enterpriseSearch.searching=!1,a.enterpriseSearch.searchResults=b},function(b){a.enterpriseSearch.status="An error occurred: "+b.status,a.enterpriseSearch.searching=!1,a.enterpriseSearch.hasError=!0}))}}angular.module("ep.action.set",["ep.feature.detection","ep.templates"]),angular.module("ep.drag.drop",[]),angular.module("ep.feature.detection",["ep.templates"]),angular.module("ep.local.storage",[]),angular.module("ep.login",["ui.router","ep.token","ep.templates"]),angular.module("ep.modaldialog",["ep.templates"]),angular.module("ep.odata",[]),angular.module("ep.search",["ep.token","ep.templates"]),angular.module("ep.templates",[]),angular.module("ep.theme",["ep.templates"]),angular.module("ep.token",["ep.utils","ngCookies"]),angular.module("ep.utils",[]),angular.module("ep.action.set").directive("epActionItem",["$document","actionSetFactory",function(a,b){return{restrict:"E",scope:{handler:"=",title:"@",trigger:"@",type:"@",params:"=",actionSwitch:"=switch",actionSwitchParams:"=switchParams",actionSwitchResult:"=switchResult",icon:"@"},link:function(a,c,d){var e={handler:a.handler,title:a.title,trigger:a.trigger,type:a.type,params:a.params,actionSwitch:a.actionSwitch,actionSwitchParams:a.actionSwitchParams,actionSwitchResult:a.actionSwitchResult};a.$destroy(),a=null,b.registerAction(c,e,"default"in d),c.remove()}}}]),angular.module("ep.action.set").controller("epActionMenuCtrl",["$scope","$document",function(a,b){function c(){e.actions=null,a.$root.$$phase||a.$apply(),b.off("click.actionMenu")}function d(a,b){b.handler.call(e,b.callback),c(),a.stopPropagation(),a.preventDefault()}var e=this;e.closeMenu=c,e.invokeAction=d,a.$on("actionMenuCall",function(d,f){e.actions=f.actions,"fixed"!==e.menu.css("position")&&e.menu.css({left:f.event.clientX+"px",top:f.event.clientY+"px"}),b.on("click.actionMenu",function(){c()}),a.$root.$$phase||a.$apply()})}]),angular.module("ep.action.set").directive("epActionMenu",function(){return{restrict:"E",replace:!0,controller:"epActionMenuCtrl",controllerAs:"actionMenuCtrl",templateUrl:"src/components/ep.action.set/action-menu/action-menu.html",link:function(a,b){a.actionMenuCtrl.menu=b}}}),angular.module("ep.action.set").directive("epActionSeparator",["$document",function(){return{restrict:"E",require:"^epActionSet",link:function(a,b){var c=$(b).parent(),d=c.data("actions")||[];d.push({type:"separator"}),b.remove()}}}]),angular.module("ep.action.set").controller("epActionSetCtrl",["$scope",function(a){a.onActionCallerClick=function(b){var c=$(b.target).closest(".ep-interactivity-sign"),d=c.parent().data("actions");a.$root.$broadcast("actionMenuCall",{event:b,actions:d}),b.preventDefault(),b.stopPropagation()}}]),angular.module("ep.action.set").directive("epActionSet",["$compile","epFeatureDetectionService",function(a,b){return{restrict:"E",scope:{position:"=",bindTo:"=",insertTo:"="},controller:"epActionSetCtrl",compile:function(a,c){var d="";if(a.parent().addClass("ep-relative").addClass("ep-action-owner"),d="ep-actionset-right-down",b.browserIsMobile()===!1&&c.position)switch(c.position){case"absolute-right-bottom":d="ep-actionset-right-bottom";break;case"right-bottom":d="ep-actionset-right-down";break;case"right-center":d="ep-actionset-right-center"}return a.addClass("ep-actionset"),a.addClass(d),a.append($('<div class="ep-interactivity-sign" ng-controller="epActionSetCtrl" ng-click="onActionCallerClick($event)"><span class="fa fa-ellipsis-h"></span></div></div>')),{pre:function(){},post:function(b){b.bindTo&&(b.bindTo.append(a),b.bindTo.addClass("ep-relative").addClass("ep-action-owner")),b.$destroy(),b=null}}}}}]),angular.module("ep.action.set").factory("actionSetFactory",[function(){function a(a,b){if(null!==b.handler){var c=$(a).parent(),d=c.data("actions")||[],e={title:b.title,type:"action",icon:b.icon};if(b.actionSwitch&&(e["switch"]=b.actionSwitch,e.switchParams=b.actionSwitchParams,e.switchResult=b.actionSwitchResult),Array.isArray(b.params)){var f=function(){b.handler.apply(a,arguments[0])};e.handler=f.bind(c,b.params)}else b.handler&&(e.handler=b.handler.bind(c,b.params));d.push(e),c.data("actions",d)}}return{registerAction:a}}]),angular.module("ep.action.set").directive("epDynamicActionSet",["$compile","$rootScope",function(a,b){return{restrict:"EA",scope:{provider:"=epDynamicActionSetProvider",actionParams:"=epDynamicActionSetParams",bindTo:"=epDynamicActionSetBindTo",insertTo:"=epDynamicActionSetInsrtTo",injections:"=epDynamicActionSetInjections"},link:function(c,d){var e="undefined"==typeof c.bindTo||null===c.bindTo;c.provider&&(c.provider.actionSet.apply(e,d,b,c,a),c.$destroy(),c=null)}}}]),angular.module("ep.action.set").factory("dynamicActionSetFactory",[function(){function a(a,c){return new b(a,c)}function b(a,b){function d(a,b,d){var f=new c(a,b,d);e(f),m.push(f)}function e(a){if(!(a.title&&a.title.length>0))throw new Error("Title for the action is required!")}function f(a,b){for(var c=!1,d=0;d<m.length;d++)if(m[d].title===a){m.splice(d,b?m.length-d:1),c=!0;break}c&&(l&&l.remove(),this.apply.apply(this,k))}function g(a,b,d,f){for(var g=0;g<m.length;g++)if(m[g].title===a)return;var h=new c(a,b,d,f);e(h),m.push(h),l&&l.remove(),this.apply.apply(this,k)}function h(a,c,d,e,f){var g=[];if(k=arguments,j=f,a&&(!angular.isFunction(b)||b(c,e))){g.push('<ep-action-set position="right-bottom" bind-to="bindTo" insert-to="insertTo">'),i=d.$new(!0);for(var h=0;h<m.length;h++)g.push(m[h].build(h,i));g.push("</ep-action-set>"),i.bindTo=e.bindTo||c,i.params=e.actionParams,i.bindTo.data("actions",null),l=f(g.join(""))(i)}}this.name=a,this.onCreateActionSet=b;var i,j,k,l,m=[];return{addAction:d,apply:h,removeAction:f,appendAction:g}}function c(a,b,c,d){this.title=a,this.handler=b;var e,f=[];if(c)for(e in c)c.hasOwnProperty(e)&&f.push(e+'="'+c[e]+'"');this.apply=function(a,b,c,e){var g=b.$new(!0),h='<ep-action-item title="'+this.title+'icon="'+d+'" " handler="handler" params="params" bind-to="bindTo" insert-to="insertTo" '+f.join(" ")+"></ep-action-item>";g.handler="function"==typeof this.handler?this.handler:c[this.handler],g.params=c.actionParams,g.bindTo=c.bindTo||a,g.insertTo=c.provider.insertTo,g.injections=c.injections,e(h)(g)},this.build=function(a,b){return b["fnc"+a]=this.handler,'<ep-action-item title="'+this.title+'" icon="'+d+'" " handler="fnc'+a+'" params="params" bind-to="bindTo" insert-to="insertTo" '+f.join(" ")+"></ep-action-item>"}}return{getDynamicActionSet:a}}]),angular.module("ep.drag.drop").factory("dragOperationFactory",[function(){function a(a){var b={};return b.dropCallback=a.dropCallback,b.dropCallbackParams=a.dropCallbackParams,b.dragItem=a.dragItem,b.dragItemType=a.dragItemType,b}return{getDragOperation:a}}]),angular.module("ep.drag.drop").directive("epDraggable",["dragOperationFactory",function(a){return{restrict:"A",scope:{dropCallback:"=dropCallback",dropCallbackParams:"=dropCallbackParams",dragItem:"=dragItem",dragItemType:"=dragItemType"},compile:function(b,c){return c.draggable||b.attr("draggable","true"),function(b,c){if(!b.dragItemType)throw new Error("Dragged item type is not specified!");c.on("dragstart",function(c){var d=a.getDragOperation(b),e=function(){return d};b.$root.$broadcast("startDraging",e),c.stopPropagation()})}}}}]),angular.module("ep.drag.drop").controller("epDropAreaCtrl",["$scope",function(a){function b(a,b){f=b}function c(b){var c=f(),d=e.dropItemTypes.split(",");if(Array.isArray(d)&&d.length>1){if(-1===d.indexOf(c.dragItemType))return}else if(e.dropItemTypes!==c.dragItemType)return;a[e.dropHandler]&&a[e.dropHandler].call(c.dragItem||this,c),b.stopPropagation()}function d(a){return a.preventDefault(),!1}var e=this;e.onDragStart=b,e.onDrop=c,e.onDragOver=d;var f}]),angular.module("ep.drag.drop").directive("epDropArea",[function(){return{restrict:"A",controller:"epDropAreaCtrl",controllerAs:"dropCtrl",compile:function(){return function(a,b,c){a.dropCtrl.dropItemTypes=c.dropItemTypes,a.dropCtrl.dropHandler=c.dropHandler,a.$on("startDraging",a.dropCtrl.onDragStart),b.on("drop",a.dropCtrl.onDrop),b.on("dragover",a.dropCtrl.onDragOver)}}}}]),angular.module("ep.feature.detection").service("epFeatureDetectionService",[function(){function a(){return void 0===h.browserIsMobile&&(h.browserIsMobile=function(b){if("undefined"!=typeof a.result)return a.result;var c=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(c=!0),a.result=c,c}(navigator.userAgent||navigator.vendor||window.opera)),h.browserIsMobile}function b(){return void 0===h.supportsDragAndDrop&&(h.supportsDragAndDrop="draggable"in document.createElement("span")),h.supportsDragAndDrop}function c(){return h.transitionEvent}function d(){return h}function e(){return h.touchEvents}function f(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a];return null}function g(){h.browserIsMobile=a(),h.supportsDragAndDrop=b(),h.transitionEvent=f(),h.touchEvents="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;try{if(window.device&&window.cordova)h.platform={app:"Cordova",os:window.device.platform};else if(void 0!==window.require&&require("nw.gui")&&process)h.platform={app:"NWJS",os:process.platform};else{var c=navigator.userAgent,d=navigator.appName,e=""+parseFloat(navigator.appVersion),g=parseInt(navigator.appVersion,10),i=-1,j=-1,k=-1;-1!==(j=c.indexOf("Opera"))?(d="Opera",e=c.substring(j+6),-1!==(j=c.indexOf("Version"))&&(e=c.substring(j+8))):-1!==(j=c.indexOf("MSIE"))?(d="Microsoft Internet Explorer",e=c.substring(j+5)):-1!==(j=c.indexOf("Chrome"))?(d="Chrome",e=c.substring(j+7)):-1!==(j=c.indexOf("Safari"))?(d="Safari",e=c.substring(j+7),-1!==(j=c.indexOf("Version"))&&(e=c.substring(j+8))):-1!==(j=c.indexOf("Firefox"))?(d="Firefox",e=c.substring(j+8)):(i=c.lastIndexOf(" ")+1)<(j=c.lastIndexOf("/"))&&(d=c.substring(i,j),e=c.substring(j+1),d.toLowerCase()===d.toUpperCase()&&(d=navigator.appName)),-1!==(k=e.indexOf(";"))&&(e=e.substring(0,k)),-1!==(k=e.indexOf(" "))&&(e=e.substring(0,k)),g=parseInt(""+e,10),isNaN(g)&&(e=""+parseFloat(navigator.appVersion),g=parseInt(navigator.appVersion,10));var l="Unknown OS";-1!==navigator.appVersion.indexOf("Win")&&(l="Windows"),-1!==navigator.appVersion.indexOf("Mac")&&(l="MacOS"),-1!==navigator.appVersion.indexOf("X11")&&(l="UNIX"),-1!==navigator.appVersion.indexOf("Linux")&&(l="Linux"),h.platform={app:"Web",os:l,browser:{name:d,fullVersion:e,majorVersion:g,appName:navigator.appName,userAgent:navigator.userAgent}}}}catch(m){console.log(m.message)}}var h={browserIsMobile:void 0,supportsDragAndDrop:void 0,transitionEvent:null,touchEvents:!1,platform:{}};return g(),{browserIsMobile:a,supportsDragAndDrop:b,getTransitionEvent:c,hasTouchEvents:e,getFeatures:d}}]),angular.module("ep.local.storage").provider("epLocalStorageConfig",function(){var a,b={settings:{},settingsID:"emfSettings"};this.$get=function(){var c=$.ajax({type:"GET",url:"sysconfig.json",cache:!1,async:!1,contentType:"application/json"});if(a=c.status,200===c.status){var d=angular.fromJson(c.responseText);d.hasOwnProperty("epLocalStorage")&&angular.extend(b,d.epLocalStorage)}return b}}),angular.module("ep.local.storage").service("epLocalStorageService",["epLocalStorageConfig",function(a){function b(a,c,d){var e=_.first(c),f=_.rest(c);f.length?(a[e]=a[e]||{},b(a[e],f,d)):void 0===d?delete a[e]:a[e]=d}function c(a,b){var d=_.first(b),e=_.rest(b);return e.length?(a[d]=a[d]||{},c(a[d],e)):a[d]}function d(){localStorage.setItem(a.settingsID,JSON.stringify(j))}function e(e){if(e){var f=e.split("."),g=c(a.settings,f);b(j,f,g)}else localStorage.removeItem(a.settingsID),j=angular.extend({},a.settings);d()}function f(a){return c(j,a.split("."))}function g(){var b=localStorage.getItem(a.settingsID);b&&(j=JSON.parse(b))}function h(a,c){b(j,a.split("."),c),d()}function i(a,b){var c=f(a);return void 0===c&&(h(a,b),c=b),c}var j=angular.extend({},a.settings);return g(),{get:f,update:h,getOrAdd:i,clear:e}}]),angular.module("ep.login").controller("epLoginCtrl",["$scope","$stateParams","$state","tokenFactory",function(a,b,c,d){a.cancelPath=b.cancelPath||"home",a.user=d.getToken(),a.status="",a.$watch(function(a){return a.hasToken=d.hasToken(),d.hasToken()}),a.login=function(){return a.hasError=!1,a.status="",a.user&&a.user.hasOwnProperty("username")&&a.user.hasOwnProperty("password")&&a.user.username&&a.user.password?void d.login(a.user).success(function(){a.hasToken=!0,c.go("home")}).error(function(b,c,d,e){var f=void 0!==e&&null!==e?e.url:"";a.status="Login Failure at: "+f,a.hasError=!0}):(a.hasError=!0,void(a.status="Please fill required fields."))},a.logout=function(){d.logout(),a.user={},a.hasToken=!1}}]),angular.module("ep.login").directive("epLogin",function(){return{restrict:"E",controller:"epLoginCtrl",templateUrl:"src/components/ep.login/login.html"}}),angular.module("ep.modaldialog").directive("epmodaldialog",[function(){return{restrict:"E",templateUrl:"src/components/ep.modaldialog/modals/modaldialog-pane.html",replace:!0,compile:function(){return{pre:function(){},post:function(a){a.config=a.dialogState.config}}}}}]),angular.module("ep.modaldialog").service("epModalDialogService",["$modal","$compile","$rootScope","$timeout","$interval","epLocalStorageService",function(a,b,c,d,e,f){function g(a){var b={showProgress:!1,icon:"fa fa-info-circle fa-4x"};t(a,b),o(a,b),p(b)}function h(a){var b={showProgress:!1,icon:"fa  fa-question-circle fa-4x",buttons:[{text:"Yes",isDefault:!0,action:a?a.fnDefaultAction:null},{text:"No",isCancel:!0,action:a?a.fnCancelAction:null}]};t(a,b),o(a,b),p(b)}function i(a){var b={showProgress:!0,icon:"fa fa-clock-o fa-4x",buttons:[]};o(a,b),p(b)}function j(a,b){var c={templateUrl:"src/components/ep.modaldialog/modals/modaldialog-error.html",title:"Exception",icon:"",status:"error",statusClass:"alert-danger",statusIcon:"fa fa-3x fa-warning",message:"",messageDetails:"",buttons:[{id:"btnOk",text:"Ok",isDefault:!0,type:"primary",action:a?a.fnDefaultAction:null}]};if(b&&b instanceof Error&&(c.message=b.message,c.messageDetails=b.stack),a&&a.status){var d=a.status.toLowerCase();switch(d){case"warning":c.statusClass="alert-warning",c.statusIcon="fa fa-3x fa-warning";break;case"error":c.statusClass="alert-danger",c.statusIcon="fa fa-3x fa-warning";break;case"information":case"info":c.statusClass="alert-info",c.statusIcon="fa fa-3x fa-info"}}o(a,c),l(c)}function k(a){var b={templateUrl:"src/components/ep.modaldialog/modals/modaldialog-error.html",title:"",icon:"",status:"information",statusClass:"alert-info",statusIcon:"fa fa-3x fa-info",message:"",messageDetails:"",buttons:[{id:"btnOk",text:"Ok",isDefault:!0,type:"primary",action:a?a.fnDefaultAction:null}]};if(a&&a.status){var c=a.status.toLowerCase();switch(c){case"warning":b.statusClass="alert-warning",b.statusIcon="fa fa-3x fa-warning";break;case"error":b.statusClass="alert-danger",b.statusIcon="fa fa-3x fa-warning";break;case"information":case"info":b.statusClass="alert-info",b.statusIcon="fa fa-3x fa-info"}}o(a,b),l(b)}function l(b){var c=b;return m(),1!==s(c)?(c._isModalDialog=!0,q(c),a.open({size:"small"===c.size?"sm":"large"===c.size?"lg":"",backdrop:c.backdrop===!1?!1:c.backdrop||!1,templateUrl:"src/components/ep.modaldialog/modals/modaldialog-custom.html",controller:["$scope","$modalInstance",function(a,b){x=b,a.config=c,a.btnclick=function(c){var d=r(a.config,c);-1!==d&&(u(),c.isCancel?b.dismiss("cancel"):b.close(d?d:0))}}]})):void 0}function m(){u(),w.isVisible=!1,x&&(x.close(0),x=null)}function n(a){a?f.clear(y+a):f.clear(y.substr(0,y.length-1))}function o(a,b){a&&b&&angular.forEach(a,function(c,d){null!==a[d]&&(angular.isArray(a[d])?b[d]=a[d]:angular.isObject(a[d])?o(a[d],b[d]):b[d]=a[d])})}function p(a){u();var d={};return o(v,d),o(a,d),s(d)?void m():(w.isVisible=!0,angular.element("body .ep-modaldialog.ep-modaldialog-pane").length||(w.paneScope=c.$new(),w.paneScope.dialogState=w,w.paneScope.btnclick=function(a){m(),r(w.config,a)},angular.element(document.body).append(b("<epmodaldialog></epmodaldialog>")(w.paneScope))),d._isModalDialog=!1,q(d),w.config=d,void(w.paneScope&&(w.paneScope.config=d)))}function q(a){a.buttons&&a.buttons.length&&angular.forEach(a.buttons,function(b){b.type||(a._isModalDialog&&b.isDefault===!0?b.type="primary":a._isModalDialog&&b.isCancel===!0?b.type="warning":b.type="default")}),a.autoClose&&(a.messageHasTimer=a.message.indexOf("{timer}")>=0,a.titleHasTimer=a.title.indexOf("{timer}")>=0,w.autoClosePromise=d(function(){null!==w.autoClosePromise&&a.fnDefaultAction&&a.fnDefaultAction(),m()},1e3*a.autoClose),a.countDown=a.autoClose,(a.messageHasTimer||a.titleHasTimer||a.showTimer)&&(w.timerPromise=e(function(){a.countDown--,a.countDown<=0&&(e.cancel(w.timerPromise),w.timerPromise=null)},1e3,0)),a.spinnerTextClass=a.countDown<100?"ep-timer-large-font":"ep-timer-small-font"),a.showSpinner=a.showTimer||a.showProgress,a.showSpinner&&(a.spinnerIconClass=a.showTimer?"fa-circle-o-notch":"fa-spinner"),a.fnGetMessage=function(){if(a.messageHasTimer){var b=void 0!==a.countDown&&null!==a.countDown?a.countDown:"";return a.message.replace("{timer}",b)}return a.message},a.fnGetTitle=function(){if(a.titleHasTimer){var b=void 0!==a.countDown&&null!==a.countDown?a.countDown:"";return a.title.replace("{timer}",b)}return a.title}}function r(a,b){var c=0,d="";return b.action?(c=b.action(a,b),d=b.text):b.isDefault===!0&&a.fnDefaultAction?(c=a.fnDefaultAction(a,b),d="fnDefaultAction"):b.isCancel===!0&&a.fnCancelAction?(c=a.fnCancelAction(a,b),d="fnCancelAction"):a.fnButtonAction?(c=a.fnButtonAction(a,b),d=b.text):d=b.text,a.rememberMeValue&&a.dialogId&&d&&f.update(y+a.dialogId,d),c}function s(a){if(a.rememberMeValue=!1,a.rememberMe&&!a.dialogId&&(a.rememberMe=!1),a.rememberMe&&a.dialogId&&f.get(y+a.dialogId)){var b=!1,c=f.get(y+a.dialogId);if("fnDefaultAction"===c&&a.fnDefaultAction)b=!0,a.fnDefaultAction(a);else if("fnCancelAction"===c&&a.fnCancelAction)b=!0,a.fnCancelAction(a);else{var d=null;angular.forEach(a.buttons,function(a){a.text===c&&(d=a)}),d&&(d.action?(b=!0,d.action(a,d)):d.fnButtonAction&&(b=!0,d.fnButtonAction(a,d)))}return b?1:-1}return 0}function t(a,b){if(a&&a.status){var c=a.status.toLowerCase();b.titleClass="warning"===c?"text-warning":"error"===c?"text-danger":"text-success",b.icon="warning"===c||"error"===c?"fa fa-4x fa-warning":"fa fa-4x fa-check"}}function u(){w.autoClosePromise&&(d.cancel(w.autoClosePromise),w.autoClosePromise=null),w.timerPromise&&(e.cancel(w.timerPromise),w.timerPromise=null)}var v={containerClass:"bg-primary",title:"Title",titleClass:"text-warning",message:"Message",messageClass:"",icon:"fa fa-info-circle fa-4x",iconClass:"",showProgress:!1,autoClose:0,fnDefaultAction:null,fnCancelAction:null,fnButtonAction:null,buttons:[{text:"Ok",isDefault:!0}]},w={isVisible:!1,config:{},timerPromise:null,autoClosePromise:null,paneScope:null};angular.copy(v,w.config);var x=null,y="emf.dialogs.dialogId.";return{showMessage:g,showConfirm:h,showProgress:i,showException:j,showMessageBox:k,showCustomDialog:l,hide:m,clearRememberMe:n}}]),angular.module("ep.odata").factory("odataQueryFactory",function(){function a(a,b){var c="";if("string"==typeof a&&(c=a,a=null),a&&a.constructor.toString().indexOf("Array")>1){var d;for(d=0;d<a.length;d++)c+=(""===c?"":",")+a[d];a=null}if(a)for(var e in a)a.hasOwnProperty(e)&&(c+=(""===c?"":",")+e,b&&a[e]&&(c+=" desc"));return c}function b(a){return"string"==typeof a&&(k.type=a),this}function c(a){return isNaN(a)||parseInt(Number(a))!==a||(k.$top=a),this}function d(a){return isNaN(a)||parseInt(Number(a))!==a||(k.$skip=a),this}function e(b){var c=a(b,!0);return""!==c&&(k.$orderby=c),this}function f(b){var c=a(b);return""!==c&&(k.$select=c),this}function g(b){var c=a(b);return""!==c&&(k.$expand=c),this}function h(a){if(a)for(var b in a)a.hasOwnProperty(b)&&a[b]&&(k.$filter=(k&&k.$filter?k.$filter+" and ":"")+b+" eq '"+a[b]+"'");return this}function i(a,b,c,d){var e={">":"gt",">=":"ge","<":"lt","<=":"le","=":"eq","==":"eq","!=":"ne","<>":"ne"};b=e[b]||b;var f="",g=d&&"or"in d&&d.or?" or ":" and ",h=isNaN(c)?"'":"";if(null!==a&&void 0!==a&&null!==c&&void 0!==c){switch(b){case"math":if(!(d&&"mathOperand"in d&&"mathFunction"in d&&"mathCompareOp"in d))throw"Malformed math operation; params object must contain mathOperand, mathFunction, and mathCompareOp properties";if(isNaN(c)||isNaN(d.mathOperand))throw"The second argument and mathOperand for math functions needs to be a number";b=e[d.mathCompareOp]||d.mathCompareOp,a=a+" "+d.mathFunction+" "+d.mathOperand;break;case"endswith":case"startswith":a=b+"("+a+",'"+c+"')",b="eq",c="true",h="",f=d&&"not"in d&&d.not?"not ":"";break;case"contains":a="indexof("+a+",'"+c+"')",b=d&&"not"in d&&d.not?"lt ":"ge",c="0",h="";break;case"day":case"month":case"year":case"second":case"minute":case"hour":if(isNaN(c)&&parseInt(Number(c))!==c)throw"The second argument for date/time functions needs to be an integer";a=b+"("+a+")",b="eq"}k.$filter=(k&&k.$filter?k.$filter+g:"")+f+a+" "+b+" "+h+c+h}return this}function j(){var a=$.extend({},k);return k={},a}var k={};return{setType:b,setTop:c,setSkip:d,setOrderBy:e,setSelect:f,setExpands:g,setFilter:h,setWhere:i,compose:j}}),angular.module("ep.search").provider("searchConfig",function(){var a,b={searchUri:"https://localhost/EES/EpicorERP/search.xml"};this.$get=function(){var c=$.ajax({type:"GET",url:"sysconfig.json",cache:!1,async:!1,contentType:"application/json"});if(a=c.status,200===c.status){var d=angular.fromJson(c.responseText);d.hasOwnProperty("EP_SEARCH_CONFIG")&&angular.extend(b,d.EP_SEARCH_CONFIG)}return b}}),angular.module("ep.search").controller("epSearchCtrl",["$scope","searchService",searchController]),angular.module("ep.search").directive("epSearch",function(){return{restrict:"E",replace:!0,controller:"epSearchCtrl",templateUrl:"src/components/ep.search/search.html"}}),angular.module("ep.search").factory("searchService",["$http","searchConfig",function(a,b){function c(a,b,c){return d(a,b,c).then(function(a){return e(a)},function(){})}function d(c,d,e){var f=b.searchUri+"?locale="+(navigator.language?navigator.language:navigator.userLanguage)+"&preservenulls="+!1+"&likeLinkFormat=EWAUrl&callback=JSON_CALLBACK",g=(new Date).valueOf(),h="&q="+c+"&start="+d+"&cache="+g.toString()+"&pageSize="+e;return a.get(f+h)}function e(a){var b={};if(a&&a.hasOwnProperty("data")){var c=a.data,d=$.parseXML(c),e=$(d);e.find("[primaryTable]").each(function(){var a=[];$(this).find("[companyName]").each(function(){var b={location:this.getAttribute("location")||"",label:this.getAttribute("label")||"",companyContext:this.getAttribute("companyName"),keyTag:this.getAttribute("keyTag"),fields:[]};$("*",this).each(function(a,c){for(var d={},e=0,f=c.attributes.length;f>e;e++)d[c.attributes[e].nodeName]=c.attributes[e].nodeValue;d.FieldName=c.nodeName,d.FieldValue=c.textContent,b.fields.push(d)}),a.push(b)}),b[this.nodeName]={label:this.getAttribute("label"),primaryTable:this.getAttribute("primaryTable"),results:a}})}return b}return{search:c}}]),angular.module("ep.theme").provider("epThemeConfig",function(){var a,b={themes:[{ThemeNam:"bootstrap",ThemeCssFilename:"bootstrap.min.css"},{ThemeName:"flatly",ThemeCssFilename:"flatly.min.css"}],theme:{ThemeName:"bootstrap",ThemeCssFilename:"bootstrap.min.css"}};this.$get=function(){var c=$.ajax({type:"GET",url:"sysconfig.json",cache:!1,async:!1,contentType:"application/json"});if(a=c.status,200===c.status){var d=angular.fromJson(c.responseText);d.hasOwnProperty("epThemeConfig")&&angular.extend(b,d.epThemeConfig)}return b}}),angular.module("ep.theme").service("epThemeService",["epThemeConfig",function(a){var b=angular.extend({},a.theme);this.getThemes=function(){return a.themes},this.getTheme=function(a){return _.find(this.getThemes(),function(b){return b.ThemeName===a})},this.theme=function(a){return a&&(b=_.find(this.getThemes(),function(b){return b.ThemeName===a}),b||(b=_.find(this.getThemes(),function(a){return"bootstrap"===a.ThemeName}))),b}}]),angular.module("ep.token").provider("tokenConfig",function(){var a,b={restUri:"https://localhost/ICE3/TokenResource.svc/",tokenId:"epicor.token.auth"};this.$get=function(){var c=$.ajax({type:"GET",url:"sysconfig.json",cache:!1,async:!1,contentType:"application/json"});if(a=c.status,200===c.status){var d=angular.fromJson(c.responseText);d.hasOwnProperty("epTokenConfig")&&angular.extend(b,d.epTokenConfig)}return b}}),angular.module("ep.token").factory("tokenFactory",["$cookieStore","$http","tokenConfig","utilsConfig","$q",function(a,b,c,d,e){function f(b){return d.debug&&"manager"===b.username&&"Epicor123"===b.password?l(b):j(b).success(function(d){k(d),a.put(c.tokenId,b)}).error(function(){})}function g(){a.remove(c.tokenId)}function h(){return a.get(c.tokenId)}function i(){var a=h();return void 0!==a&&!angular.equals({},a)}function j(a){return b.defaults.headers.post=a,b.post(c.restUri,{})}function k(b){b&&b.hasOwnProperty("bearer")&&a.put(c.tokenId,b)}function l(a){var b=e.defer(),c=b.promise;return c.success=function(a){return c.then(a),c},c.error=function(a){return c.then(null,a),c},k({username:a.username,bearer:"mySampleTokenDataValue"}),b.resolve(""),c}return{login:f,logout:g,getToken:h,hasToken:i}}]),angular.module("ep.utils").provider("utilsConfig",function(){var a,b={debug:!1};this.$get=function(){var c=$.ajax({type:"GET",url:"sysconfig.json",cache:!1,async:!1,contentType:"application/json"});if(a=c.status,200===c.status){var d=angular.fromJson(c.responseText);d.hasOwnProperty("epUtilsConfig")&&angular.extend(b,d.epUtilsConfig)}return b}}),angular.module("ep.utils").service("epUtilsService",[function(){function a(a){if(!a||arguments.length<1)return"";var b=a;if(arguments.length>1){var c=arguments;b=b.replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1),d=null;return b+1<c.length&&(d=c[b+1]),d})}return b}function b(a,b){var c={};return a.forEach(function(a){var d,e;if(angular.isString(b))e=a[b];else{if(!angular.isFunction(b))throw new Error("mapArray called with an invalid idAccessor.");e=b(a)}d=angular.isFunction(e)?e():e,c[d]=a}),c}function c(a,b){a&&b&&angular.forEach(a,function(d,e){null!==a[e]&&(angular.isArray(a[e])?b[e]=a[e]:angular.isObject(a[e])?(angular.isObject(b[e])||(b[e]={}),c(a[e],b[e])):b[e]=a[e])})}return{strFormat:a,mapArray:b,copyProperties:c}}]),angular.module("ep.templates").run(["$templateCache",function(a){a.put("src/components/ep.action.set/action-menu/action-menu.html",'<div id=ep-actions-menu-ctr ng-show=actionMenuCtrl.actions><ul class="dropdown-menu ep-actions-menu list-unstyled noselect" role=menu><li ng-repeat="action in actionMenuCtrl.actions" ng-if="!action.switch || action.switch(action.switchParams) == action.switchResult" ng-switch=action.type ng-class="{\'hidden\': action.switch != null && action.switch == false}"><a ng-switch-when=action class=ep-actions-menu-item ng-click="actionMenuCtrl.invokeAction($event, action)"><span class="icon {{action.icon}}"></span><span>{{::action.title}}</span></a><div ng-switch-when=separator class=ep-actions-menu-item-separator></div></li><li class=ep-actions-menu-item-mobile><a class="ep-actions-menu-item edd-red separate" ng-click=actionMenuCtrl.close()><span class="icon icon-clear"></span><span>Close</span></a></li></ul></div>'),a.put("src/components/ep.login/login.html",'<div class=thumbnail><div class=caption><h3 ng-hide=hasToken><span class="icon icon-enter"></span> Login</h3><h3 ng-show=hasToken><span class="icon icon-exit"></span> Logout</h3><hr></div><form role=form><div class=form-group><label for=user-name class="col-sm-2 control-label">User:</label><div><input class=form-control id=user-name value={{::user.username}} ng-model=user.username placeholder=username required></div></div><div class=form-group><label for=user-password class="col-sm-2 control-label">Password:</label><div><input type=password class=form-control id=user-password value={{::user.password}} ng-model=user.password placeholder=password required></div></div></form><hr><p></p><div class="alert alert-danger" id=validationSummary role=alert ng-show=hasError>{{status}}</div><div><a class="btn btn-default" ui-sref={{::cancelPath}}>Cancel</a> <button type=button class="btn btn-primary" ng-hide=hasToken ng-click=login()>Login</button> <button type=button class="btn btn-primary" ng-show=hasToken ng-click=logout()>Logout</button></div></div>'),a.put("src/components/ep.modaldialog/modals/modaldialog-custom.html",'<div class="ep-modaldialog ep-modaldialog-custom"><div class=modal-header><span class=close ng-show=config.closeButton><button type=button data-dismiss=modal aria-label=Close ng-click="btnclick({isCancel: true})"><span aria-hidden=true>&times;</span></button></span><h4 id=dialogTitle class="bg-primary modal-title"><span class="ep-dlg-title-icon {{config.icon}}"></span> <span class=ep-dlg-title ng-bind=config.fnGetTitle()></span></h4></div><div class=modal-body><form id=dialogForm name=dialogForm><div ng-include=config.templateUrl></div><div class="ep-dlg-rememberMe col-md-10" ng-show=config.rememberMe><div class=form-group><div class="row col-md-1"><input tabindex=1 id=cbxRemember class=form-control type=checkbox ng-model=config.rememberMeValue></div><label class="col-md-10 control-label">Do not show this message again</label></div></div></form></div><div class=modal-footer><div class=ep-dlg-buttons><button ng-repeat="btn in config.buttons" id=btn.id tabindex="$index + 100" data-dismiss=modal ng-hide=btn.hidden ng-disabled="btn.isPrimary && !dialogForm.$valid" class="btn btn-{{btn.type}}" ng-click=btnclick(btn)><i ng-if=btn.icon ng-class=btn.icon></i> &nbsp;{{btn.text}}</button></div></div><div class=ep-dlg-status ng-show=config.statusBar><h4 class="bg-primary modal-title"><span>{{config.statusBarText}}</span></h4></div></div>'),
a.put("src/components/ep.modaldialog/modals/modaldialog-error.html",'<!--Custom Dialog Error Template--><div class=ep-modaldialog-error><div class="alert clearfix" ng-class=config.statusClass><table class=ep-dlg-bodytable><tr><td><span ng-if=config.showSpinner class="ep-dlg-icon fa-stack fa-2x"><i class="ep-dlg-spinner-icon fa fa-spin fa-stack-2x" ng-class=config.spinnerIconClass></i> <i ng-if=config.showTimer class="ep-dlg-spinner-text fa fa-stack-1x {{config.spinnerTextClass}}" ng-class=config.spinnerTextClass>{{config.countDown}}</i></span> <span ng-if=!config.showSpinner class=ep-dlg-icon><i class="fa fa-3x" ng-class=config.statusIcon></i></span></td><td><span class=ep-dlg-message ng-class=config.messageClass ng-bind=config.fnGetMessage()></span></td></tr></table></div><div class=ep-message-details ng-show=config.messageDetails><a href="" ng-click="config.showDetails = !config.showDetails;">{{config.showDetails ? \'Hide details\': \'Show details\'}}</a><div ng-show=config.showDetails><textarea ng-model=config.messageDetails ng-readonly=true disabled></textarea></div></div></div>'),a.put("src/components/ep.modaldialog/modals/modaldialog-pane.html",'<div class="ep-modaldialog ep-modaldialog-pane ep-ease-animation ep-hide-fade" ng-hide=!dialogState.isVisible><div class=ep-dlg-container ng-class=config.containerClass><div class="ep-dlg-center clearfix"><span class="ep-dlg-icon pull-left" ng-class=config.iconClass style="margin-right: 10px; margin-top: 5px"><span ng-if=config.showSpinner class="ep-dlg-icon fa-stack fa-2x"><i class="ep-dlg-spinner-icon fa fa-spin fa-stack-2x" ng-class=config.spinnerIconClass></i> <i ng-if=config.showTimer class="ep-dlg-spinner-text fa fa-stack-1x" ng-class=config.spinnerTextClass>{{config.countDown}}</i></span> <i ng-if=!config.showSpinner ng-class=config.icon></i></span><div class=pull-left><span class=ep-dlg-title ng-class=config.titleClass ng-bind=config.fnGetTitle()></span><p class=ep-dlg-message ng-class=config.messageClass ng-bind=config.fnGetMessage()></p><div class="ep-dlg-rememberMe form-group" ng-show=config.rememberMe><div class=checkbox><input tabindex=1 id=cbxRemember type=checkbox ng-model=config.rememberMeValue><label>Do not show this message again</label></div></div><!--<div class="ep-dlg-progress-indicator" ng-show="config.showProgress"><span class="fa fa-pulse fa-spinner fa-5x" ng-class="config.progressClass"></span></div>--><!--<div class="ep-dlg-progress-indicator" ng-show="config.showProgress && config.showTimer"><span ng-class="config.timerClass">{{config.countDown}}</span></div>--><div class=ep-dlg-buttons><button ng-repeat="btn in config.buttons" id=btn.id tabindex="$index + 100" data-dismiss=modal ng-hide=btn.hidden class="btn btn-{{btn.type}} btn-sm" ng-click=btnclick(btn)><i ng-if=btn.icon ng-class=btn.icon></i> &nbsp;{{btn.text}}</button></div></div></div></div></div>'),a.put("src/components/ep.search/search.html",'<div><header class=reverse><div class=searchControl><form role=form ng-submit=runSearch(searchText)><input type=search placeholder="Enter your search terms..." ng-model=searchText ng-change="changeSearch()"> <span class=input-group-btn><button class="btn btn-default" type=button><span class="icon icon-search"></span></button></span> <button ng-click=runSearch(searchText) ng-disabled=!searchText>search</button></form><div class="alert alert-danger" id=validationSummary role=alert ng-show=hasError>{{status}}</div></div></header><section><div ng-show=enterpriseSearch.searchText><p ng-show=enterpriseSearch.searching>Searching for the following terms: \'{{enterpriseSearch.searchText}}\' ...</p><p ng-show=enterpriseSearch.searchError>{{enterpriseSearch.searchError}}</p></div><ul ng-if=enterpriseSearch.searchResults class=searchResults><li ng-repeat="searchResult in enterpriseSearch.searchResults track by $index" class=searchResultCategory><b>Category: {{searchResult.label | uppercase}}</b><br><ul ng-if=searchResult.results><li ng-repeat="result in searchResult.results" class=searchResult><span class=searchResultHeader ng-class=searchResult.label>{{result.label | uppercase}} - {{result.companyContext}} - {{result.keyTag}}</span><br><div ng-if=result.fields><span ng-repeat="field in result.fields" class=searchResultField>{{field.alias}}: {{field.FieldValue}},</span></div></li></ul></li></ul></section></div>')}]);